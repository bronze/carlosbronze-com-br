---
import Container from '@components/container.astro'
import Layout from '@layouts/Layout.astro'
import { Icon } from 'astro-icon'
import type { Frontmatter } from '~/config'
import { SiteMetadata } from '~/config'
import coverSVG from '~/assets/opengraph.jpg'
import socialImage from '~/assets/hero.png'

const frontmatter: Frontmatter = {
  title: 'GSAP',
  description: "You've reached for a page that doesn't exist... :(.",
  coverSVG: coverSVG,
  socialImage: socialImage,
  publishDate: SiteMetadata.buildTime,
}
---

<Layout frontmatter={frontmatter}>
  <Container class="min-h-[200vh]">
    <p>
      from <a
        href="https://gsap.com/community/forums/topic/37076-scrollsmoother-data-speed-and-image-parallax-not-working-in-production-works-in-dev/"
        >https://gsap.com/community/forums/topic/37076-scrollsmoother-data-speed-and-image-parallax-not-working-in-production-works-in-dev/</a
      >
    </p>
    <p>https://codepen.io/collection/BNMEYN?cursor=eyJwYWdlIjo0fQ==</p>
     https://gsap.com/community/forums/topic/31772-scrollsmoother-fixed-elements-issue/


    <div id="smooth-wrapper">
      <div id="smooth-content">
        <section id="content">
          <!--  smooth scrolling biz goes in here -->
          <section class="image-grid container">
            <!--    use picture elements -->
            <picture class="image_cont">
              <source
                srcset="https://images.unsplash.com/photo-1506744038136-46273834b3fb?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0NDMzNTU3OA&ixlib=rb-1.2.1&q=85&w=1500"
                media="(min-width: 1500px)"
              />
              <source
                srcset="https://images.unsplash.com/photo-1506744038136-46273834b3fb?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0NDMzNTU3OA&ixlib=rb-1.2.1&q=85&w=1000"
                media="(min-width: 700px)"
              />
              <img
                class=""
                src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0NDMzNTU3OA&ixlib=rb-1.2.1&q=85&w=600"
              />
            </picture>
            <!--    or just images -->
            <div class="image_cont">
              <img
                src="https://images.unsplash.com/photo-1569596082827-c5e8990496cb?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0NDMzNDg3NQ&ixlib=rb-1.2.1&q=80&w=500"
                alt=""
              />
            </div>
            <div class="image_cont">
              <img
                src="https://images.unsplash.com/photo-1587932775991-708a20af2cc2?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0NDMzNDQ5Mg&ixlib=rb-1.2.1&q=80&w=500"
                alt=""
              />
            </div>
            <div class="image_cont">
              <img
                src="https://images.unsplash.com/photo-1523712999610-f77fbcfc3843?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0NDMzNTU3OA&ixlib=rb-1.2.1&q=85&w=1200"
                alt=""
              />
            </div>
            <div class="image_cont">
              <img
                src="https://images.unsplash.com/photo-1623166200209-6bd48520d6cb?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0NDMzNDg3NQ&ixlib=rb-1.2.1&q=80&w=500"
                alt=""
              />
            </div>
            <div class="image_cont">
              <img
                src="https://images.unsplash.com/photo-1532587459811-f057563d1936?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0NDMzNDg3NQ&ixlib=rb-1.2.1&q=80&w=500"
                alt=""
              />
            </div>
          </section>
          <div class="spacer"></div>
        </section>
      </div>
    </div>
    <!-- <div class="overlay">
 <div></div>
 <div></div>
 <div></div>
 <div></div>
 <div></div>
 <div></div>
 <div></div>
 <div></div>
 <div></div>
 <div></div>
 <div></div>
 <div></div>
</div> -->
  </Container>
</Layout>
<style>
  .container {
    /* max-width: 2500px; */
    margin: 0 auto;
  }

  .spacer {
    height: 100vh;
  }

  .image-grid {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    grid-column-gap: 1rem;
    grid-row-gap: 33.3vh;
    width: 100vw;
    margin: 0 auto;

    .image_cont {
      position: relative;
      overflow: hidden;
      height: 80vh;
      max-height: 500px;
    }

    img {
      position: absolute;
      width: 100%;
      height: 160%;
      object-fit: cover;
      bottom: 0;
    }

    .image_cont:nth-child(1) {
      grid-column: 1 / -1;
      grid-row: 1;
      height: 95vh;
    }

    .image_cont:nth-child(2) {
      grid-column: 2 / span 8;
      grid-row: 2;
      height: 60vh;
    }

    .image_cont:nth-child(3) {
      grid-column: 4 / span 8;
      grid-row: 3;
      height: 60vh;
      img {
        object-position: right;
      }
    }

    .image_cont:nth-child(4) {
      grid-column: 1 / -1;
      grid-row: 4;
      height: 60vh;
    }

    .image_cont:nth-child(5) {
      grid-column: 4 / span 8;
      grid-row: 5;
      height: 80vh;
    }

    .image_cont:nth-child(6) {
      grid-column: 2 / span 8;
      grid-row: 6;
      height: 80vh;
    }

    @media screen and (min-width: 1000px) {
      .image_cont {
        max-height: unset;
      }

      .image_cont:nth-child(2) {
        grid-column: 2 / span 4;
      }

      .image_cont:nth-child(3) {
        grid-column: 8 / span 4;
      }

      .image_cont:nth-child(5) {
        grid-column: 8 / span 4;
      }

      .image_cont:nth-child(6) {
        grid-column: 2 / span 4;
      }
    }
  }

  .overlay {
    /* position: fixed; */
    /* height: 100vh; */
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    grid-column-gap: 1rem;
    grid-row-gap: 10rem;
    width: 100vw;
    margin: 0 auto;
    z-index: -1;

    div {
      opacity: 0.2;
      border-left: 0.5px white solid;
      border-right: 0.5px white solid;
    }
  }
</style>
<style>
  html {
    /* @apply scroll-smooth; */
  }
</style>

<script>
  import { gsap } from 'gsap-trial'

  import { ScrollTrigger } from 'gsap-trial/ScrollTrigger'

  /* The following plugin is a Club GSAP perk */
  import { ScrollSmoother } from 'gsap-trial/ScrollSmoother'

  gsap.registerPlugin(ScrollTrigger, ScrollSmoother)
  ScrollTrigger.normalizeScroll(true) //https://gsap.com/docs/v3/Plugins/ScrollTrigger/static.normalizeScroll()/
  let normalizer = ScrollTrigger.normalizeScroll()

  const smoother = ScrollSmoother.create({
    content: '#content',
    smooth: 1,
    effects: true,
  })

  smoother.effects('img', { speed: 'auto' })
</script>
