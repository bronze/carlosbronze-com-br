---
import type { HTMLAttributes } from 'astro/types'
import { tv } from 'tailwind-variants'

import { Button } from '@/components/starwind/button'
import Mail from '@tabler/icons/outline/mail.svg'
import BrandLinkedin from '@tabler/icons/outline/brand-linkedin.svg'

import gridPattern from '@/assets/blocks/patterns/square-alt-grid.svg'
import block1 from '@/assets/blocks/block-1.svg'
import block2 from '@/assets/blocks/block-2.svg'
import block3 from '@/assets/blocks/block-3.svg'
import block4 from '@/assets/blocks/block-4.svg'
import block5 from '@/assets/blocks/block-5.svg'
import block6 from '@/assets/blocks/block-6.svg'

const blocks: Record<string, { src: string }> = {
  'block-1': block1,
  'block-2': block2,
  'block-3': block3,
  'block-4': block4,
  'block-5': block5,
  'block-6': block6,
}

const integrationRows = [
  ['block-1', 'block-2', 'block-3', 'block-4', 'block-5'],
  ['block-6', 'block-1', 'block-2', 'block-3', 'block-4'],
  ['block-5', 'block-6', 'block-1', 'block-2', 'block-3'],
]

interface Props extends HTMLAttributes<'section'> {
  /** Main heading text */
  heading?: string
  /** Description text */
  description?: string
  /** Primary button text */
  primaryButtonText?: string
  /** Primary button href */
  primaryButtonHref?: string
  /** Secondary button text */
  secondaryButtonText?: string
  /** Secondary button href */
  secondaryButtonHref?: string
}

const hero2Styles = tv({
  base: 'relative flex min-h-screen w-full items-center px-4 overflow-x-hidden',
})

const {
  heading = 'Ship Faster with Modern Components',
  description = 'Build production-ready websites with our comprehensive component library. Everything you need to create beautiful, responsive interfaces that users love.',
  primaryButtonText = 'Get in touch',
  primaryButtonHref = '#contact',
  secondaryButtonText = 'LinkedIn',
  secondaryButtonHref = 'https://linkedin.com/in/carlosbronze',
  class: className,
  ...rest
} = Astro.props
---

<section class={hero2Styles({ class: className })} {...rest}>
  <!-- <div class="@container mx-auto w-full max-w-7xl">
    <div class="flex max-w-3xl flex-col">
      <h1
        class="font-heading text-4xl font-medium tracking-tight @xl:text-5xl @3xl:text-6xl">
        {heading}
      </h1>
      <p
        class="text-muted-foreground mt-6 max-w-xl text-lg leading-relaxed text-pretty">
        {description}
      </p>
      <div class="mt-8 flex flex-wrap gap-3">
        <Button
          asChild
          class="bg-accent text-accent-foreground hover:bg-accent/90 rounded-full px-6">
          <a href={primaryButtonHref} class="inline-flex items-center">
            <Mail class="mr-4 size-4" />
            {primaryButtonText}
          </a>
        </Button>
        <Button variant="outline" class="rounded-full" asChild>
          <a
            href={secondaryButtonHref}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center">
            <BrandLinkedin class="mr-4 size-4" />
            {secondaryButtonText}
          </a>
        </Button>
      </div>
    </div>
  </div> -->
  <!-- Background grid pattern -->
  <div
    class="absolute inset-x-0 top-0 flex h-full w-full items-center justify-center opacity-100">
    <img
      alt=""
      class="w-full max-w-6xl mask-[radial-gradient(75%_75%_at_center,white,transparent)] opacity-90"
      src={gridPattern.src}
    />
  </div>

  <div class="@container mx-auto w-full max-w-7xl">
    <div
      class="relative container flex flex-col items-start md:flex-row md:items-center md:-space-x-26">
      <!-- Left: text content -->
      <div
        class="bg-background z-20 w-full shrink-0 pt-32 md:-mx-4 md:w-1/2 md:bg-transparent md:px-4 md:pb-32">
        <div class="flex flex-col items-start text-left">
          <div class="max-w-3xl">
            <h1
              class="font-heading text-4xl font-medium tracking-tight @xl:text-5xl @3xl:text-6xl">
              {heading}
            </h1>
            <p
              class="text-muted-foreground mt-6 max-w-xl text-lg leading-relaxed text-pretty">
              {description}
            </p>
            <div class="mt-8 flex flex-wrap gap-3">
              <Button
                href={primaryButtonHref}
                class="bg-accent text-accent-foreground hover:bg-accent/90 rounded-full px-6">
                <Mail class="mr-4 size-4" />
                {primaryButtonText}
              </Button>
              <Button
                variant="outline"
                href={secondaryButtonHref}
                target="_blank"
                rel="noopener noreferrer"
                class="rounded-full">
                <BrandLinkedin class="mr-4 size-4" />
                {secondaryButtonText}
              </Button>
            </div>
          </div>
        </div>
      </div>

      <!-- Right: integration icon grid -->
      <div>
        <div
          class="flex -translate-x-10 flex-col gap-8 pt-12 pb-8 sm:translate-x-0 md:gap-16 md:py-32">
          {
            integrationRows.map(row => (
              <div class="flex gap-x-22 even:translate-x-22">
                {row.map(icon => (
                  <div class="border-background bg-background size-22 rounded-xl border shadow-xl">
                    <div class="bg-muted/20 h-full w-full p-4">
                      <img
                        alt="Integration"
                        class="size-full dark:invert"
                        src={blocks[icon].src}
                      />
                    </div>
                  </div>
                ))}
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </div>

  <!-- Scroll indicator -->
  <a
    href="#about"
    class="text-muted-foreground hover:text-foreground absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce transition-colors"
    aria-label="Scroll to about section">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="size-5"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round">
      <path d="M12 5v14M5 12l7 7 7-7"></path>
    </svg>
  </a>
</section>
